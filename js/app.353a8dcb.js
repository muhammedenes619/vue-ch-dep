(function(){"use strict";var e={6089:function(e,t,i){var o=i(9963),r=i(6252);const n={class:"container justify-items-center align-items-center"},a={class:"row align-items-center vh-100"},s={class:"col-12"};function d(e,t,i,d,l,c){const g=(0,r.up)("TopBar"),u=(0,r.up)("MainArea");return(0,r.wg)(),(0,r.iD)("div",n,[(0,r._)("div",a,[(0,r._)("div",s,[(0,r.Wm)(g,{isImageUploaded:l.isImageUploaded,inEditMode:l.inEditMode,onToggleEditMode:c.toggelInEditMode},null,8,["isImageUploaded","inEditMode","onToggleEditMode"]),(0,r.wy)((0,r.Wm)(u,{onImageUploaded:c.receiveImageUploadStatus,inEditMode:l.inEditMode},null,8,["onImageUploaded","inEditMode"]),[[o.F8,!l.inEditMode]])])])])}var l=i(3577);const c=e=>((0,r.dD)("data-v-285e4a17"),e=e(),(0,r.Cn)(),e),g=c((()=>(0,r._)("div",null,null,-1))),u={class:"card mb-3",style:{"max-width":"100%"}},m={key:0},p={class:"row"},v={class:"col-12 d-flex justify-content-center align-items-center"},h={class:"video-container p-2"},f=["src"],b={key:1,class:"card-body d-flex flex-column justify-content-center align-items-center"},S=c((()=>(0,r._)("h5",{class:"card-title"},"There is no Image Or Video uploded yet ",-1))),y=c((()=>(0,r._)("p",{class:"card-text"}," if you wish You can upload one using upload button",-1))),_={href:"#",class:"btn btn-primary"},M={ref:"uploadedFile",type:"file",class:"image-upload-form__file",accept:"image/*,video/*"},T={key:2},w={class:"row g-0"},I={class:"col d-flex justify-content-center"},E={class:"cropper-container"},U=["src"],L={class:"col-auto"},F={class:"card-body side-body d-flex flex-column justify-content-center align-items-center"},C={key:3},V={class:"row g-0"},D={class:"col text-center"},$=["src"];function k(e,t,i,n,a,s){const d=(0,r.up)("videoList"),c=(0,r.up)("RangeSlider"),k=(0,r.up)("SideBar");return(0,r.wg)(),(0,r.iD)(r.HY,null,[g,(0,r._)("div",u,[(0,r.Wm)(d,{onMergeVideos:s.mergeVideos,videoList:a.videoList},null,8,["onMergeVideos","videoList"]),a.isVideoUploaded?((0,r.wg)(),(0,r.iD)("div",m,[(0,r._)("div",p,[(0,r._)("div",v,[(0,r._)("div",h,[(0,r._)("video",{ref:"videoElement",src:a.videoSrc,onLoadedmetadata:t[0]||(t[0]=(...e)=>s.getVideoDuration&&s.getVideoDuration(...e)),controls:""},null,40,f),(0,r.Wm)(c,{class:"py-2",onEndTime:s.endTimeModify,onStartTime:s.startTimeModify,trimStartPoint:a.trimStartPoint,videoDuration:a.videoDuration,convertToHHMMSS:s.convertToHHMMSS},null,8,["onEndTime","onStartTime","trimStartPoint","videoDuration","convertToHHMMSS"]),(0,r._)("a",{class:"btn btn-outline-secondary mb-2",onClick:t[1]||(t[1]=(...e)=>s.trimVideo&&s.trimVideo(...e)),role:"button"},"Trim & Save"),(0,r._)("a",{class:"btn btn-outline-secondary mb-2",onClick:t[2]||(t[2]=(...e)=>s.addToMergeList&&s.addToMergeList(...e)),role:"button"},"Add To Merge List")])])])])):a.isImageUploaded||i.inEditMode||a.isVideoUploaded?a.isImageUploaded&&i.inEditMode?((0,r.wg)(),(0,r.iD)("div",T,[(0,r._)("div",w,[(0,r._)("div",I,[(0,r._)("div",E,[(0,r._)("img",{src:a.imageSrc,class:"uploaded-img img-fluid rounded-start",ref:"image",alt:"..."},null,8,U)])]),(0,r._)("div",L,[(0,r._)("div",F,[(0,r.Wm)(k,{cropTriggered:a.cropTriggered,onRotaiteImageRight:t[5]||(t[5]=e=>s.rotaiteImage(90)),onRotaiteImageLeft:t[6]||(t[6]=e=>s.rotaiteImage(-90)),onCropTriggered:s.toggleCrop},null,8,["cropTriggered","onCropTriggered"]),(0,r._)("a",{class:(0,l.C_)(["btn mt-5 btn-outline-secondary",{disabled:!a.cropTriggered}]),onClick:t[7]||(t[7]=(...e)=>s.submitCroppedImage&&s.submitCroppedImage(...e)),href:"#",role:"button"},"S",2)])])])])):a.isImageUploaded&&!i.inEditMode?((0,r.wg)(),(0,r.iD)("div",C,[(0,r._)("div",V,[(0,r._)("div",D,[(0,r._)("img",{src:a.imageSrc,class:"uploaded-img img-fluid rounded-start",alt:"..."},null,8,$)])])])):(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",b,[S,y,(0,r._)("a",_,[(0,r.Uk)("Upload "),(0,r._)("form",{class:"form",onSubmit:t[4]||(t[4]=(0,o.iM)((()=>{}),["prevent"]))},[(0,r._)("div",{class:"image-upload-form-drop",onChange:t[3]||(t[3]=(...e)=>s.onFileChange&&s.onFileChange(...e))},[(0,r._)("input",M,null,512)],32)],32)])]))])],64)}i(8858),i(1318),i(3228),i(4224),i(1121),i(7133),i(560);const x={class:"d-flex flex-column row-gap-3"};function j(e,t,i,o,n,a){return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("aside",x,[(0,r._)("a",{class:(0,l.C_)(["btn btn-outline-primary",{disabled:i.cropTriggered}]),href:"#",onClick:t[0]||(t[0]=(...e)=>a.toggleCrop&&a.toggleCrop(...e)),role:"button"},"C ",2),(0,r._)("a",{class:(0,l.C_)(["btn btn-outline-secondary",{disabled:!i.cropTriggered}]),href:"#",onClick:t[1]||(t[1]=(...e)=>a.rotaitImageRight&&a.rotaitImageRight(...e)),role:"button"},"R",2),(0,r._)("a",{class:(0,l.C_)(["btn btn-outline-secondary",{disabled:!i.cropTriggered}]),href:"#",onClick:t[2]||(t[2]=(...e)=>a.rotaitImageLeft&&a.rotaitImageLeft(...e)),role:"button"},"L",2)])])}var P={props:["cropTriggered"],data(){return{}},methods:{toggleCrop(){this.$emit("crop-triggered",this.cropTriggered)},rotaitImageLeft(){this.$emit("rotaite-image-left")},rotaitImageRight(){this.$emit("rotaite-image-right")}}},R=i(3744);const H=(0,R.Z)(P,[["render",j]]);var O=H;function W(e,t,i,o,n,a){const s=(0,r.up)("v-range-slider");return(0,r.wg)(),(0,r.j4)(s,{modelValue:n.range,"onUpdate:modelValue":t[0]||(t[0]=e=>n.range=e),max:i.videoDuration,min:0,step:.1,"hide-details":"",class:"align-center",strict:"","thumb-label":"always",onMouseup:a.setStartTime,onTouchend:a.setStartTime},{"thumb-label":(0,r.w5)((e=>[(0,r.Uk)((0,l.zw)(i.convertToHHMMSS(e.modelValue)),1)])),_:1},8,["modelValue","max","onMouseup","onTouchend"])}var B={props:["videoDuration","convertToHHMMSS","trimStartPoint"],data(){return{range:[0,this.videoDuration],previousStart:0}},methods:{setStartTime(){if(this.range[0]!==this.previousStart){const e=this.range[0];this.$emit("start-time",e),this.previousStart=e}else{const e=this.range[1];this.$emit("end-time",e)}}}};const A=(0,R.Z)(B,[["render",W],["__scopeId","data-v-49db6878"]]);var Z=A;const Y=e=>((0,r.dD)("data-v-7b3ef8e5"),e=e(),(0,r.Cn)(),e),N={key:0,class:"row justify-content-center align-items-center"},q=Y((()=>(0,r._)("div",{class:"col text-center"},[(0,r._)("div",{class:"alert alert-warning",role:"alert"}," No Videos in the list ")],-1))),z=[q],K={key:1,class:"row"},G=Y((()=>(0,r._)("div",{class:"col-12 text-center"},[(0,r._)("h2",null,"Merge List")],-1))),J=["src"],Q={class:"col-12 text-center"};function X(e,t,i,o,n,a){return(0,r.wg)(),(0,r.iD)("div",null,[0===i.videoList.length?((0,r.wg)(),(0,r.iD)("div",N,z)):((0,r.wg)(),(0,r.iD)("div",K,[G,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.videoList,((e,t)=>((0,r.wg)(),(0,r.iD)("div",{key:t,class:"col-3 video-container"},[(0,r._)("video",{src:e.src,controls:""},null,8,J)])))),128)),(0,r._)("div",Q,[(0,r._)("a",{class:"btn btn-outline-secondary mb-2",onClick:t[0]||(t[0]=(...e)=>a.mergeVideosTrigger&&a.mergeVideosTrigger(...e)),role:"button"},"Merge")])]))])}var ee={props:["videoList"],methods:{mergeVideosTrigger(){this.$emit("merge-videos")}}};const te=(0,R.Z)(ee,[["render",X],["__scopeId","data-v-7b3ef8e5"]]);var ie=te,oe=i(3129),re=i.n(oe),ne=i(5045),ae=i(8412),se={components:{SideBar:O,RangeSlider:Z,VideoList:ie},props:["inEditMode"],data(){return{isImageUploaded:!1,cropTriggered:!1,isVideoUploaded:!1,imageSrc:"",videoSrc:"",cropper:{},destination:{},image:{},videoDuration:0,currentTime:0,trimStartPoint:0,trimEndPoint:0,videoFile:{},videoList:[]}},methods:{onFileChange(e){const t=e.target.files[0];if(t)if(t.type.startsWith("image/")){this.isImageUploaded=!0;const e=new FileReader;e.onload=e=>{this.imageSrc=e.target.result},e.readAsDataURL(t),this.$emit("image-uploaded",this.isImageUploaded)}else t.type.startsWith("video/")?(this.isImageUploaded=!1,this.isVideoUploaded=!0,this.videoSrc=URL.createObjectURL(t),this.videoFile=t,this.$emit("video-uploaded",this.isVideoUploaded)):console.log("Unsupported file type")},getVideoDuration(){const e=this.$refs.videoElement;this.videoDuration=e.duration,this.currentTime=e.currentTime},startTimeModify(e){this.trimStartPoint=e;const t=this.$refs.videoElement;t.currentTime=e,t.play(),console.log(this.trimStartPoint)},endTimeModify(e){this.trimEndPoint=e,console.log(this.trimEndPoint)},convertToHHMMSS(e){const t=Math.floor(e/3600),i=Math.floor(e%3600/60),o=Math.floor(e%60),r=t.toString().padStart(2,"0"),n=i.toString().padStart(2,"0"),a=o.toString().padStart(2,"0");return`${r}:${n}:${a}`},async mergeVideos(){const e=(0,ne.createFFmpeg)({log:!0}),t="mergedvideo.mp4";try{console.log("Loading FFmpeg..."),await e.load(),console.log("FFmpeg loaded successfully!");for(let t=0;t<this.videoList.length;t++){const i=await fetch(this.videoList[t].src),o=await i.blob(),r=await o.arrayBuffer(),n=`input${t}.mp4`;e.FS("writeFile",n,new Uint8Array(r)),this.videoList[t].src=n}const i=this.videoList.map((e=>`-i ${e.src}`)).join(" ");console.log("Merging videos...");const o=this.videoList.map(((e,t)=>`[${t}:v]scale=1920:1080[scaled${t}]`)).join(";"),r=`${o};[scaled0][0:a][scaled1][1:a]concat=n=${this.videoList.length}:v=1:a=1[v][a]`;await e.run("-y",...i.split(" "),"-filter_complex",r,"-map","[v]","-map","[a]",t);const n=e.FS("readFile",t);this.videoFile=n,this.videoSrc=URL.createObjectURL(new Blob([n.buffer],{type:"video/mp4"})),this.trimStartPoint=0,this.trimEndPoint=n.duration,this.isVideoUploaded=!0}catch(i){throw console.error("Error merging videos:",i),i}},async trimVideo(){console.log(this.videoFile.URL),await this.ffmpegTrimVideo(this.videoFile,this.trimStartPoint,this.trimEndPoint)},async ffmpegTrimVideo(e,t,i){const o=(0,ne.createFFmpeg)({log:!0}),r="trimmed_video.mp4",n=i-t;try{console.log("Loading FFmpeg..."),await o.load(),console.log("FFmpeg loaded successfully!"),console.log("Reading input file..."),await o.FS("writeFile",e.name,await(0,ae.dc)(e)),console.log("Trimming video..."),await o.run("-i",e.name,"-ss",this.convertToHHMMSS(t),"-t",this.convertToHHMMSS(n),"-c","copy",r),console.log(t,i,n),console.log("Writing output file...");const a=o.FS("readFile",r),s=URL.createObjectURL(new Blob([a.buffer],{type:"video/mp4"}));this.$refs.videoElement.src=s,this.videoSrc=s,this.trimStartPoint=0,this.trimEndPoint=a.duration}catch(a){throw console.error("Error during video trimming:",a),a}},addToMergeList(){this.$refs.videoElement?(this.videoFile.src=this.videoSrc,this.videoList.push(this.videoFile),this.resetInput()):console.error("No video file available to add to the list.")},resetInput(){const e=this.$refs.uploadedFile;e&&(e.value=""),this.videoFile=null,this.isVideoUploaded=!1,this.videoSrc="",this.trimStartPoint=0,this.trimEndPoint=0},toggleCrop(){this.cropTriggered=!this.cropTriggered,console.log("triggered",this.cropTriggered),this.cropImage()},cropImage(){this.image=this.$refs.image,this.cropper=new(re())(this.image,{viewMode:1,aspectRatio:null,guides:!0,movable:!0})},rotaiteImage(e){this.cropper&&this.cropper.rotate(e)},submitCroppedImage(){if(this.cropper){const e=this.cropper.getCroppedCanvas(),t=e.toDataURL("image/jpeg");this.imageSrc=t,this.cropTriggered=!1,this.cropper.destroy(),this.cropper=null}}}};const de=(0,R.Z)(se,[["render",k],["__scopeId","data-v-285e4a17"]]);var le=de;const ce=e=>((0,r.dD)("data-v-4767a368"),e=e(),(0,r.Cn)(),e),ge={class:"card"},ue={class:"card-body d-flex column-gap-3 justify-content-center align-items-center"},me=ce((()=>(0,r._)("a",{class:"btn btn-outline-success",href:"#",role:"button"},"View",-1)));function pe(e,t,i,o,n,a){return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",ge,[(0,r._)("div",ue,[(0,r._)("a",{class:(0,l.C_)([{disabled:!i.isImageUploaded||i.inEditMode},"btn btn-outline-secondary"]),onClick:t[0]||(t[0]=(...e)=>a.toggleInEditMode&&a.toggleInEditMode(...e)),href:"#",role:"button"},"Edit",2),me])])])}var ve={props:["isImageUploaded","inEditMode"],data(){return{}},methods:{toggleInEditMode(){this.$emit("toggle-edit-mode")}}};const he=(0,R.Z)(ve,[["render",pe],["__scopeId","data-v-4767a368"]]);var fe=he,be={name:"App",components:{MainArea:le,TopBar:fe},data(){return{inEditMode:!1,isImageUploaded:!1}},methods:{receiveImageUploadStatus(e){this.isImageUploaded=e},toggelInEditMode(){this.inEditMode=!this.inEditMode,console.log(this.inEditMode,this.isImageUploaded)}}};const Se=(0,R.Z)(be,[["render",d]]);var ye=Se,_e=(i(3734),i(9773),i(1291)),Me=i(9059),Te=i(6300);(0,o.ri)(ye).mount("#app");const we=(0,_e.Rd)({components:Me,directives:Te});(0,o.ri)(ye).use(we).mount("#app")}},t={};function i(o){var r=t[o];if(void 0!==r)return r.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,i),n.exports}i.m=e,function(){var e=[];i.O=function(t,o,r,n){if(!o){var a=1/0;for(c=0;c<e.length;c++){o=e[c][0],r=e[c][1],n=e[c][2];for(var s=!0,d=0;d<o.length;d++)(!1&n||a>=n)&&Object.keys(i.O).every((function(e){return i.O[e](o[d])}))?o.splice(d--,1):(s=!1,n<a&&(a=n));if(s){e.splice(c--,1);var l=r();void 0!==l&&(t=l)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[o,r,n]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var o in t)i.o(t,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,o){var r,n,a=o[0],s=o[1],d=o[2],l=0;if(a.some((function(t){return 0!==e[t]}))){for(r in s)i.o(s,r)&&(i.m[r]=s[r]);if(d)var c=d(i)}for(t&&t(o);l<a.length;l++)n=a[l],i.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return i.O(c)},o=self["webpackChunkmedia_challange_vue"]=self["webpackChunkmedia_challange_vue"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=i.O(void 0,[998],(function(){return i(6089)}));o=i.O(o)})();
//# sourceMappingURL=app.353a8dcb.js.map